<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brains@Play Docs</title>
    <link rel=stylesheet href="./../../../../brainsatplay-docs/default.css"/>
    <link rel=stylesheet href="./../../../../static/custom.css"/>
    <link rel="icon" href="./../../../../static/img/favicon.ico" type="image/x-icon" />
</head>
<body>
    <div id="brainsatplay-docs">

    <header>
        <nav><h1>Brains@Play</h1></nav>
    </header>
    <div id="brainsatplay-docs-main">
        <div id="brainsatplay-docs-sidebar"><ul data-sidebar-depth=0><a href="./../../../../roadmap.html"><li>Home</li></a><li>Repos</li><ul data-sidebar-depth=1><a href="./../../../index.html"><li>Main  Page</li></a><li>Accessify</li><ul data-sidebar-depth=2><a href="./../../../accessify/index.html"><li>Main  Page</li></a></ul><li>Datastreams Api</li><ul data-sidebar-depth=2><a href="./../../../datastreams-api/index.html"><li>Main  Page</li></a></ul><li>Brainsatplay</li><ul data-sidebar-depth=2><a href="./../../../brainsatplay/index.html"><li>Main  Page</li></a><li>Src</li><ul data-sidebar-depth=3><li>Core</li><ul data-sidebar-depth=4><a href="./../../../brainsatplay/src/core/index.html"><li>Main  Page</li></a></ul></ul></ul><li>Escode</li><ul data-sidebar-depth=2><a href="./../../index.html"><li>Main  Page</li></a><li>Components</li><ul data-sidebar-depth=3><a href="./../../components/index.html"><li>Main  Page</li></a></ul><li>Apps</li><ul data-sidebar-depth=3><li>Chrome</li><ul data-sidebar-depth=4><a href="./../../apps/chrome/index.html"><li>Main  Page</li></a></ul></ul><li>Libraries</li><ul data-sidebar-depth=3><li>Escomposer</li><ul data-sidebar-depth=4><a href="./../escomposer/index.html"><li>Main  Page</li></a></ul><li>Escode</li><ul data-sidebar-depth=4><a href="./../escode/index.html"><li>Main  Page</li></a></ul><li>Esmonitor</li><ul data-sidebar-depth=4><a href="./index.html"><li>Main  Page</li></a></ul><li>Escompose</li><ul data-sidebar-depth=4><a href="./../escompose/index.html"><li>Main  Page</li></a></ul><li>Esmpile</li><ul data-sidebar-depth=4><a href="./../esmpile/index.html"><li>Main  Page</li></a></ul></ul></ul><li>Graphscript</li><ul data-sidebar-depth=2><a href="./../../../graphscript/Graph.html"><li>Graph</li></a><a href="./../../../graphscript/Service.html"><li>Service</li></a><a href="./../../../graphscript/index.html"><li>Main  Page</li></a><li>Services</li><ul data-sidebar-depth=3><li>Cmd</li><ul data-sidebar-depth=4><a href="./../../../graphscript/services/cmd/cmd.service.html"><li>Cmd.service</li></a></ul><li>Dom</li><ul data-sidebar-depth=4><a href="./../../../graphscript/services/dom/dom.service.html"><li>Dom.service</li></a></ul><li>Http</li><ul data-sidebar-depth=4><a href="./../../../graphscript/services/http/http.browser.html"><li>Http.browser</li></a><a href="./../../../graphscript/services/http/http.node.html"><li>Http.node</li></a></ul><li>Router</li><ul data-sidebar-depth=4><a href="./../../../graphscript/services/router/Router.html"><li>Router</li></a></ul><li>Sse</li><ul data-sidebar-depth=4><a href="./../../../graphscript/services/sse/sse.browser.html"><li>Sse.browser</li></a><a href="./../../../graphscript/services/sse/sse.node.html"><li>Sse.node</li></a></ul><li>Webrtc</li><ul data-sidebar-depth=4><a href="./../../../graphscript/services/webrtc/webrtc.browser.html"><li>Webrtc.browser</li></a></ul><li>Worker</li><ul data-sidebar-depth=4><a href="./../../../graphscript/services/worker/worker.html"><li>Worker</li></a><a href="./../../../graphscript/services/worker/worker.service.html"><li>Worker.service</li></a></ul><li>Wss</li><ul data-sidebar-depth=4><a href="./../../../graphscript/services/wss/wss.browser.html"><li>Wss.browser</li></a><a href="./../../../graphscript/services/wss/wss.node.html"><li>Wss.node</li></a></ul></ul></ul><li>NRF52</li><ul data-sidebar-depth=2><a href="./../../../nRF52/index.html"><li>Main  Page</li></a></ul><li>Tinybuild</li><ul data-sidebar-depth=2><a href="./../../../tinybuild/index.html"><li>Main  Page</li></a><li>Tinybuild</li><ul data-sidebar-depth=3><li>Docs</li><ul data-sidebar-depth=4><a href="./../../../tinybuild/tinybuild/docs/python.html"><li>Python</li></a><a href="./../../../tinybuild/tinybuild/docs/esbuild.html"><li>Esbuild</li></a><a href="./../../../tinybuild/tinybuild/docs/server.html"><li>Server</li></a><a href="./../../../tinybuild/tinybuild/docs/tinybuild.html"><li>Tinybuild</li></a></ul></ul></ul><li>Visualscript</li><ul data-sidebar-depth=2><a href="./../../../visualscript/index.html"><li>Main  Page</li></a></ul><li>Wasl</li><ul data-sidebar-depth=2><a href="./../../../wasl/index.html"><li>Main  Page</li></a></ul><li>Docs</li><ul data-sidebar-depth=2><a href="./../../../docs/index.html"><li>Main  Page</li></a><li>Old</li><ul data-sidebar-depth=3><li>Docs</li><ul data-sidebar-depth=4><a href="./../../../docs/old/docs/index.html"><li>Main  Page</li></a><li>Guides</li><ul data-sidebar-depth=5><a href="./../../../docs/old/docs/guides/index.html"><li>Main  Page</li></a><li>Libraries</li><ul data-sidebar-depth=6><a href="./../../../docs/old/docs/guides/libraries/index.html"><li>Main  Page</li></a></ul></ul><li>Resources</li><ul data-sidebar-depth=5><a href="./../../../docs/old/docs/resources/Biosignals.html"><li>Biosignals</li></a><a href="./../../../docs/old/docs/resources/BrainScience.html"><li>Brain Science</li></a><a href="./../../../docs/old/docs/resources/Algorithms.html"><li>Algorithms</li></a><a href="./../../../docs/old/docs/resources/Electronics.html"><li>Electronics</li></a><a href="./../../../docs/old/docs/resources/GeneralEngineering.html"><li>General Engineering</li></a><a href="./../../../docs/old/docs/resources/ParticipatoryResearch.html"><li>Participatory Research</li></a><a href="./../../../docs/old/docs/resources/Psychology.html"><li>Psychology</li></a><a href="./../../../docs/old/docs/resources/index.html"><li>Main  Page</li></a><li>Software</li><ul data-sidebar-depth=6><a href="./../../../docs/old/docs/resources/software/Applications.html"><li>Applications</li></a><a href="./../../../docs/old/docs/resources/software/C++.html"><li>C++</li></a><a href="./../../../docs/old/docs/resources/software/MATLAB.html"><li>MATLAB</li></a><a href="./../../../docs/old/docs/resources/software/Javascript.html"><li>Javascript</li></a><a href="./../../../docs/old/docs/resources/software/Python.html"><li>Python</li></a><a href="./../../../docs/old/docs/resources/software/Julia.html"><li>Julia</li></a><a href="./../../../docs/old/docs/resources/software/index.html"><li>Main  Page</li></a></ul><li>Hardware</li><ul data-sidebar-depth=6><a href="./../../../docs/old/docs/resources/hardware/Development.html"><li>Development</li></a><a href="./../../../docs/old/docs/resources/hardware/ECG.html"><li>ECG</li></a><a href="./../../../docs/old/docs/resources/hardware/EMG.html"><li>EMG</li></a><a href="./../../../docs/old/docs/resources/hardware/EEG.html"><li>EEG</li></a><a href="./../../../docs/old/docs/resources/hardware/EDA.html"><li>EDA</li></a><a href="./../../../docs/old/docs/resources/hardware/FNIRS.html"><li>FNIRS</li></a><a href="./../../../docs/old/docs/resources/hardware/Microscopy.html"><li>Microscopy</li></a><a href="./../../../docs/old/docs/resources/hardware/PPG.html"><li>PPG</li></a><a href="./../../../docs/old/docs/resources/hardware/index.html"><li>Main  Page</li></a></ul></ul></ul></ul></ul></ul><li>Resources</li><ul data-sidebar-depth=1><a href="./../../../../resources/Algorithms.html"><li>Algorithms</li></a><a href="./../../../../resources/Electronics.html"><li>Electronics</li></a><a href="./../../../../resources/BrainScience.html"><li>Brain Science</li></a><a href="./../../../../resources/Biosignals.html"><li>Biosignals</li></a><a href="./../../../../resources/GeneralEngineering.html"><li>General Engineering</li></a><a href="./../../../../resources/ParticipatoryResearch.html"><li>Participatory Research</li></a><a href="./../../../../resources/Psychology.html"><li>Psychology</li></a><a href="./../../../../resources/index.html"><li>Main  Page</li></a><li>Hardware</li><ul data-sidebar-depth=2><a href="./../../../../resources/hardware/Development.html"><li>Development</li></a><a href="./../../../../resources/hardware/ECG.html"><li>ECG</li></a><a href="./../../../../resources/hardware/EEG.html"><li>EEG</li></a><a href="./../../../../resources/hardware/EDA.html"><li>EDA</li></a><a href="./../../../../resources/hardware/EIT.html"><li>EIT</li></a><a href="./../../../../resources/hardware/EMG.html"><li>EMG</li></a><a href="./../../../../resources/hardware/FNIRS.html"><li>FNIRS</li></a><a href="./../../../../resources/hardware/Microscopy.html"><li>Microscopy</li></a><a href="./../../../../resources/hardware/PPG.html"><li>PPG</li></a><a href="./../../../../resources/hardware/index.html"><li>Main  Page</li></a></ul><li>Software</li><ul data-sidebar-depth=2><a href="./../../../../resources/software/Applications.html"><li>Applications</li></a><a href="./../../../../resources/software/Javascript.html"><li>Javascript</li></a><a href="./../../../../resources/software/C++.html"><li>C++</li></a><a href="./../../../../resources/software/Development.html"><li>Development</li></a><a href="./../../../../resources/software/Julia.html"><li>Julia</li></a><a href="./../../../../resources/software/MATLAB.html"><li>MATLAB</li></a><a href="./../../../../resources/software/index.html"><li>Main  Page</li></a><a href="./../../../../resources/software/Python.html"><li>Python</li></a></ul></ul><li>Blog</li><ul data-sidebar-depth=1></ul><li>Guides</li><ul data-sidebar-depth=1><li>Examples</li><ul data-sidebar-depth=2><a href="./../../../../guides/examples/device.html"><li>Device</li></a><a href="./../../../../guides/examples/phaser.html"><li>Phaser</li></a></ul><li>Getting Started</li><ul data-sidebar-depth=2><a href="./../../../../guides/getting-started/application.html"><li>Application</li></a><a href="./../../../../guides/getting-started/component.html"><li>Component</li></a><a href="./../../../../guides/getting-started/blog.html"><li>Blog</li></a><a href="./../../../../guides/getting-started/installation.html"><li>Installation</li></a><a href="./../../../../guides/getting-started/conventions.html"><li>Conventions</li></a><a href="./../../../../guides/getting-started/realtime.html"><li>Realtime</li></a></ul><li>Proposals</li><ul data-sidebar-depth=2><a href="./../../../../guides/proposals/hightime.html"><li>Hightime</li></a></ul></ul></ul></div>

        <section id="brainsatplay-docs-content">
            <h1 id="esmonitor">esmonitor</h1>
<p>Monitor ESM objects for changes</p>
<p><strong>esmonitor</strong> allows you to monitor ESM objects for changes.</p>
<p>This library uses three different methods for recognizing changes:</p>
<ol>
<li><strong>Wrapping functions</strong> to allow for output interception</li>
<li><strong>Adding setters</strong> to objects, which are triggered on updates</li>
<li><strong>Intermittent polling</strong> for objects (e.g. ES Modules) that don't allow setters or redeclaration of functions.</li>
</ol>
<h2 id="getting-started">Getting Started</h2>
<div class="brainsatplay-docs-code" data-filename="Code">
<pre><code>const monitor = new Monitor()

// ---------------- Register Object ----------------
const id = 'actor'
const add = (input) =&gt; input + 1
const actor = { nested: { add } }

const storeId = 'store'
const store = { value: 0 }

monitor.set(id, actor, {static: false})
monitor.set(storeId, store, {static: false})


// ---------------- Create Listeners for the Entire Object ----------------
const functionPath = ['nested', 'function']

const testSubs = monitor.on(storeId, (path, ...args) =&gt; {
    console.log(`Updated Store (${path}) - ${args}`)
})

// ---------------- Selectively Listen to Object Property ----------------
const fSubs = monitor.on([id, ...functionPath], (path, ...args) =&gt; {
    console.log(`Update from Function (${path}) - ${args}`)
    store.value = args[0] // set store value
    store.updated = true
})

reference.nested.function(store.value)

monitor.remove() // Remove all subscriptions
</code></pre></div>
<h3 id="polling">Polling</h3>
<p>The <code>polling</code> option allows you to specify a custom sampling rate for changes to your modules: </p>
<div class="brainsatplay-docs-code" data-filename="Code">
<pre><code>const monitor = new Monitor({
    polling: {
        sps: 60
    }
})
</code></pre></div>
<p>This may also be set directly on the <code>Poller</code> object:</p>
<div class="brainsatplay-docs-code" data-filename="Code">
<pre><code>monitor.poller.sps = 60
</code></pre></div>
<h2 id="notes">Notes</h2>
<h3 id="dynamic-vs-static-objects">Dynamic vs. Static Objects</h3>
<p>Dynamic objects are only necessary if you'd like to have <strong>updates from properties that were not originally on the object</strong> and that you aren't manually subscribing to. </p>
<p>For example, you may decide to listen to <em>all</em> changes on an objects. </p>
<div class="brainsatplay-docs-code" data-filename="Code">
<pre><code>const store = { value: 0 }
monitor.set('store', store, {static: true}) // declare a static object
monitor.on('store', (path) =&gt; console.log(`Updated!`, path))
</code></pre></div>
<p>However, if you add a new key later, this will not be registered.</p>
<div class="brainsatplay-docs-code" data-filename="Code">
<pre><code>store.test = true // will not trigger the callback
</code></pre></div>
<p>For this to be recognized, you will have to set <code>static: false</code>.</p>
<p>Additionally, top level of dynamic objects <strong>will only respond</strong> to changes to their original objects <strong>if those keys were present on initialization</strong>. This is unlike the behavior of setting the Proxy object directly (or objects nested inside it, which have been converted to Proxies).</p>
<div class="brainsatplay-docs-code" data-filename="Code">
<pre><code>const store = { value: 0 }
const proxy = monitor.set('store', store, {static: false}) // declare a dynamic object
monitor.on('store', (path) =&gt; console.log(`Updated!`, path))

// Update Existing Key
store.value = 1 // callback!
proxy.value = 2 // callback!

// Update New Key
store.test = 'works?' // no response...
proxy.test = 'works?' // callback!
</code></pre></div>
<h3 id="multiple-listeners-on-one-object">Multiple Listeners on One Object</h3>
<p>Setting the same object multiple times can have unexpected behavior. For example, passing a function by reference to two (parts of the same object) will result in <strong>only the first of these functions that are set</strong> to have the correct behavior.</p>
        </section>
    </div>
    <footer></footer>
    </div>
</body>
</html>
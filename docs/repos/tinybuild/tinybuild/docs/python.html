<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brains@Play Docs</title>
    <link rel=stylesheet href="../../../../.docs/default.css"/>
    <link rel=stylesheet href="../../../../static/custom.css"/>
    <link rel="icon" href="../../../../static/img/favicon.ico" type="image/x-icon" />
</head>
<body>
    <header>
        <nav><h1>Brains@Play</h1></nav>
    </header>
    <div id="brainsatplay-docs-main">
        <div id="brainsatplay-docs-sidebar"><ul><a href="../../../../projects.html"><li>Home</li></a><li>Repos</li><ul><a href="../../../index.html"><li>Main  Page</li></a><li>Accessify</li><ul><a href="../../../accessify/index.html"><li>Main  Page</li></a></ul><li>Brainsatplay</li><ul><a href="../../../brainsatplay/index.html"><li>Main  Page</li></a><li>Src</li><ul><li>Core</li><ul><a href="../../../brainsatplay/src/core/index.html"><li>Main  Page</li></a></ul></ul></ul><li>Components</li><ul><a href="../../../components/index.html"><li>Main  Page</li></a></ul><li>Datastreams Api</li><ul><a href="../../../datastreams-api/index.html"><li>Main  Page</li></a></ul><li>Docs</li><ul><a href="../../../docs/index.html"><li>Main  Page</li></a><li>Old</li><ul><li>Docs</li><ul><a href="../../../docs/old/docs/index.html"><li>Main  Page</li></a><li>Guides</li><ul><a href="../../../docs/old/docs/guides/index.html"><li>Main  Page</li></a><li>Libraries</li><ul><a href="../../../docs/old/docs/guides/libraries/index.html"><li>Main  Page</li></a></ul></ul><li>Resources</li><ul><a href="../../../docs/old/docs/resources/Algorithms.html"><li>Algorithms</li></a><a href="../../../docs/old/docs/resources/Biosignals.html"><li>Biosignals</li></a><a href="../../../docs/old/docs/resources/BrainScience.html"><li>Brain Science</li></a><a href="../../../docs/old/docs/resources/Electronics.html"><li>Electronics</li></a><a href="../../../docs/old/docs/resources/GeneralEngineering.html"><li>General Engineering</li></a><a href="../../../docs/old/docs/resources/ParticipatoryResearch.html"><li>Participatory Research</li></a><a href="../../../docs/old/docs/resources/Psychology.html"><li>Psychology</li></a><a href="../../../docs/old/docs/resources/index.html"><li>Main  Page</li></a><li>Software</li><ul><a href="../../../docs/old/docs/resources/software/C++.html"><li>C++</li></a><a href="../../../docs/old/docs/resources/software/Applications.html"><li>Applications</li></a><a href="../../../docs/old/docs/resources/software/Julia.html"><li>Julia</li></a><a href="../../../docs/old/docs/resources/software/Javascript.html"><li>Javascript</li></a><a href="../../../docs/old/docs/resources/software/MATLAB.html"><li>MATLAB</li></a><a href="../../../docs/old/docs/resources/software/Python.html"><li>Python</li></a><a href="../../../docs/old/docs/resources/software/index.html"><li>Main  Page</li></a></ul><li>Hardware</li><ul><a href="../../../docs/old/docs/resources/hardware/Development.html"><li>Development</li></a><a href="../../../docs/old/docs/resources/hardware/ECG.html"><li>ECG</li></a><a href="../../../docs/old/docs/resources/hardware/EDA.html"><li>EDA</li></a><a href="../../../docs/old/docs/resources/hardware/EEG.html"><li>EEG</li></a><a href="../../../docs/old/docs/resources/hardware/EMG.html"><li>EMG</li></a><a href="../../../docs/old/docs/resources/hardware/FNIRS.html"><li>FNIRS</li></a><a href="../../../docs/old/docs/resources/hardware/Microscopy.html"><li>Microscopy</li></a><a href="../../../docs/old/docs/resources/hardware/PPG.html"><li>PPG</li></a><a href="../../../docs/old/docs/resources/hardware/index.html"><li>Main  Page</li></a></ul></ul></ul></ul></ul><li>Escompose</li><ul><a href="../../../escompose/index.html"><li>Main  Page</li></a><li>Components</li><ul><a href="../../../escompose/components/index.html"><li>Main  Page</li></a></ul><li>Libraries</li><ul><li>Escompose</li><ul><a href="../../../escompose/libraries/escompose/index.html"><li>Main  Page</li></a></ul><li>Escomposer</li><ul><a href="../../../escompose/libraries/escomposer/index.html"><li>Main  Page</li></a></ul><li>Esmonitor</li><ul><a href="../../../escompose/libraries/esmonitor/index.html"><li>Main  Page</li></a></ul><li>Esmpile</li><ul><a href="../../../escompose/libraries/esmpile/index.html"><li>Main  Page</li></a></ul></ul></ul><li>Graphscript</li><ul><a href="../../../graphscript/Graph.html"><li>Graph</li></a><a href="../../../graphscript/Service.html"><li>Service</li></a><a href="../../../graphscript/index.html"><li>Main  Page</li></a><li>Services</li><ul><li>Dom</li><ul><a href="../../../graphscript/services/dom/dom.service.html"><li>Dom.service</li></a></ul><li>Http</li><ul><a href="../../../graphscript/services/http/http.browser.html"><li>Http.browser</li></a><a href="../../../graphscript/services/http/http.node.html"><li>Http.node</li></a></ul><li>Router</li><ul><a href="../../../graphscript/services/router/Router.html"><li>Router</li></a></ul><li>Sse</li><ul><a href="../../../graphscript/services/sse/sse.browser.html"><li>Sse.browser</li></a><a href="../../../graphscript/services/sse/sse.node.html"><li>Sse.node</li></a></ul><li>Webrtc</li><ul><a href="../../../graphscript/services/webrtc/webrtc.browser.html"><li>Webrtc.browser</li></a></ul><li>Worker</li><ul><a href="../../../graphscript/services/worker/worker.html"><li>Worker</li></a><a href="../../../graphscript/services/worker/worker.service.html"><li>Worker.service</li></a></ul><li>Cmd</li><ul><a href="../../../graphscript/services/cmd/cmd.service.html"><li>Cmd.service</li></a></ul><li>Wss</li><ul><a href="../../../graphscript/services/wss/wss.browser.html"><li>Wss.browser</li></a><a href="../../../graphscript/services/wss/wss.node.html"><li>Wss.node</li></a></ul></ul></ul><li>NRF52</li><ul><a href="../../../nRF52/index.html"><li>Main  Page</li></a></ul><li>Tinybuild</li><ul><a href="../../index.html"><li>Main  Page</li></a><li>Tinybuild</li><ul><li>Docs</li><ul><a href="./esbuild.html"><li>Esbuild</li></a><a href="./server.html"><li>Server</li></a><a href="./python.html"><li>Python</li></a><a href="./tinybuild.html"><li>Tinybuild</li></a></ul></ul></ul><li>Visualscript</li><ul><a href="../../../visualscript/index.html"><li>Main  Page</li></a></ul><li>Wasl</li><ul><a href="../../../wasl/index.html"><li>Main  Page</li></a></ul></ul><li>Resources</li><ul><a href="../../../../resources/Algorithms.html"><li>Algorithms</li></a><a href="../../../../resources/Biosignals.html"><li>Biosignals</li></a><a href="../../../../resources/BrainScience.html"><li>Brain Science</li></a><a href="../../../../resources/Electronics.html"><li>Electronics</li></a><a href="../../../../resources/GeneralEngineering.html"><li>General Engineering</li></a><a href="../../../../resources/ParticipatoryResearch.html"><li>Participatory Research</li></a><a href="../../../../resources/index.html"><li>Main  Page</li></a><a href="../../../../resources/Psychology.html"><li>Psychology</li></a><li>Hardware</li><ul><a href="../../../../resources/hardware/Development.html"><li>Development</li></a><a href="../../../../resources/hardware/ECG.html"><li>ECG</li></a><a href="../../../../resources/hardware/EDA.html"><li>EDA</li></a><a href="../../../../resources/hardware/EEG.html"><li>EEG</li></a><a href="../../../../resources/hardware/EIT.html"><li>EIT</li></a><a href="../../../../resources/hardware/EMG.html"><li>EMG</li></a><a href="../../../../resources/hardware/FNIRS.html"><li>FNIRS</li></a><a href="../../../../resources/hardware/Microscopy.html"><li>Microscopy</li></a><a href="../../../../resources/hardware/PPG.html"><li>PPG</li></a><a href="../../../../resources/hardware/index.html"><li>Main  Page</li></a></ul><li>Software</li><ul><a href="../../../../resources/software/Applications.html"><li>Applications</li></a><a href="../../../../resources/software/C++.html"><li>C++</li></a><a href="../../../../resources/software/Development.html"><li>Development</li></a><a href="../../../../resources/software/Javascript.html"><li>Javascript</li></a><a href="../../../../resources/software/Julia.html"><li>Julia</li></a><a href="../../../../resources/software/MATLAB.html"><li>MATLAB</li></a><a href="../../../../resources/software/Python.html"><li>Python</li></a><a href="../../../../resources/software/index.html"><li>Main  Page</li></a></ul></ul><li>Blog</li><ul></ul><li>Guides</li><ul><li>Examples</li><ul><a href="../../../../guides/examples/device.html"><li>Device</li></a><a href="../../../../guides/examples/phaser.html"><li>Phaser</li></a></ul><li>Getting Started</li><ul><a href="../../../../guides/getting-started/application.html"><li>Application</li></a><a href="../../../../guides/getting-started/blog.html"><li>Blog</li></a><a href="../../../../guides/getting-started/component.html"><li>Component</li></a><a href="../../../../guides/getting-started/conventions.html"><li>Conventions</li></a><a href="../../../../guides/getting-started/installation.html"><li>Installation</li></a><a href="../../../../guides/getting-started/realtime.html"><li>Realtime</li></a></ul><li>Proposals</li><ul><a href="../../../../guides/proposals/hightime.html"><li>Hightime</li></a></ul></ul></ul></div>

        <section id="brainsatplay-docs-content">
            <h2 id="pythonhttpswwwpythonorg-server-with-quarthttpspgjonesgitlabioquart-asyncio--threading-serving-the-webapp-and-websockets-sse-demos"><a href="https://www.python.org/">Python</a> server with <a href="https://pgjones.gitlab.io/quart/">Quart</a> asyncio + Threading, serving the webapp, and websockets, sse demos.</h2>
<p>We've provided some boilerplate to spin up a Python server that can communicate with the node server or directly to the browser. It can also serve the built files and website, serve a custom REST api with direct python integration, and otherwise demonstrates a high performance python server skeleton.</p>
<p>We included presets to use Quart's https production server (via <a href="https://pgjones.gitlab.io/hypercorn/">hypercorn</a>) as long as an ssl certificate is provided. See the top of the <a href="../python/server.py"><code>server.py</code></a> file for server settings which are configured manually.</p>
<p>Our python tooling documents a high performance multi-user python scenario with an order of operations shown to run simultaneous thread processes for a dedicated server thread. It's is scalable and production-ready, with enough documentation for you to find where to insert your code (hint: start with the _thread_main function and follow the queues to how the sockets get updated) and how to update SSE and Websocket queues to any connected users.</p>
<p>Code: <a href="../python"><code>tinybuild/python</code></a></p>
<h3 id="settings">Settings</h3>
<div class="brainsatplay-docs-code"><span>Code</span>
<pre><code>## 
production = False ### For serving HTTPS, use False for HTTP and hot reloading quart (only if this file changes)
host = 'localhost' ## e.g. mywebsite.com
port = 7000
startpage = 'index.html'
base_dir = '../../' ## Example serves both templates and static files from the base dir
debug = False

config = {
    'keyfile':'node_server/ssl/key.pem',
    'certfile':'node_server/ssl/cert.pem',
    'bind':host+':'+str(port)
}


</code></pre></div>
<p>Then run: <br />
<code>python tinybuild/python/server.py</code> </p>
<p>Then find <code>http://localhost:7000</code> to see the built app using the same start page the node server uses</p>
<p>or <code>http://localhost:7000/test</code> to see a test websocket stream from the python thread (if using our default test server routine)</p>
<p>For client.py <code>pip install websockets</code></p>
<h2 id="more-information">More Information</h2>
<p>Quart is natively asyncio but otherwise mimics flask. This means much faster concurrent (non-blocking) python server processing, and we included an example of implementing threads in python for more advanced processing needs. You can see this in action at our dedicated repo: <a href="https://github.com/joshbrew/esbuild_base_python">esbuild_base_python</a>. </p>
<p>This is one of the highest performance Python backends you could use, and we saved you a lot of testing! See the code for line-by-line documentation.</p>
<p>Also, find <code>client.py</code> to test the websocket from python! The server by default streams a counter to any open websocket and SSE connections. </p>
        </section>
    </div>
    <footer></footer>
</body>
</html>